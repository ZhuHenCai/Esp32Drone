## Esp32Drone

【免费声明】

使用ESP32、MPU6050、空心杯电机、N沟型场效管制作四轴无人机，该项目处于开源学习阶段，可能存在未被发现的安全漏洞、性能缺陷或逻辑瑕疵，使用及飞行过程中可能出现失控、坠机等不可预知的风险，使用风险自责！

## 项目说明



代码也是作者一路学习、一路测试、一路不停地修改过来的，改来改去有点屎山，比较乱，介意的可直接路过。
整体还是相对简单，姿态计算、PID计算上使用原始简单的欧拉角进行计算，没有使用矩阵、四元素、ROTS。。。，相对适用飞行原理初学者入门。

空必杯飞行效果：https://www.bilibili.com/video/BV1XQstzmEoj

如果使用的是无刷电机，配的的是无刷电调，直接把mapfToPWM()，与PWM相关的设置改一下就可以了。

改的无刷电机飞行效果：https://www.bilibili.com/video/BV1YL4YzvE6F

空心杯版：
![1](https://github.com/user-attachments/assets/f6a94f23-34e4-454f-bfaf-4b69b7187a30)

原理图，第一次画，半桶水，不懂会不会词不达意，慎重参考

<img width="1190" height="845" alt="3" src="https://github.com/user-attachments/assets/1413f496-e05d-484f-90eb-1b83fbb3fd56" />

小改的无刷电机版：

![2](https://github.com/user-attachments/assets/589eb5c3-701c-430e-b215-c7451cc331d3)

**具体的接线安装在抖音号：【猪很菜】，上面上传有**


## 硬件清单

1、3.7V 816空心杯电机X4.

2、MPU6050X1.

3、EPS32 X1.

4、N沟型场效管X4.

5、10K电阻X4.

6、elrs接收器X1、 及遥控器 X1（选配）.



## 关于编译

程序使用arduino IDE 开发编译，mpu6050使用的是Adafruit MPU6050库,不同的库对MPU6050的配置的别名，可能有所差异，一定要进入源文件看一下具体的参数，比如低通滤波器截止频率，有些库对不同频率的命名定义是不同，要注意匹配对应的设置。
如果MPU6050数据采集更新的频率与ESP32 loop主频相差太大，会存在相位延迟等各种问题，无人机稳定性无法调和。

原来使用的是GY-87三合一传感器，后面发现第一次弄，读取气压、磁力计后DT各种抖动，比较折腾，直接改成了MPU6050,所以项目中会有一些残余的相关代码片段，可直接删掉。


